{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Default renovate preset for general dependency management.",
  "extends": [
    "config:best-practices",
    ":prConcurrentLimit10",
    ":automergeDisabled"
  ],
  "addLabels": [
    "dependencies"
  ],
  "rebaseWhen": "conflicted",
  "minimumReleaseAge": "5 days",
  "minimumReleaseAgeBehaviour": "timestamp-required",
  "internalChecksFilter": "strict",
  "prCreation": "not-pending",
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": [
      "* * * * 0,6"
    ]
  },
  "packageRules": [
    {
      "matchUpdateTypes": [
        "lockFileMaintenance"
      ],
      "prCreation": "immediate",
      "minimumReleaseAge": null,
      "groupName": "lockfiles"
    },
    {
      "matchDatasources": [
        "deb"
      ],
      "matchPackageNames": [
        "docker-ce",
        "docker-ce-cli",
        "containerd.io",
        "docker-buildx-plugin",
        "docker-compose-plugin"
      ],
      "groupName": "docker"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update variables specifying version numbers.",
      "managerFilePatterns": [
        "/.*\\.ya?ml$/",
        "/.*\\.hcl$/",
        "/.*\\.sh$/",
        "/.*Dockerfile$/",
        "/.*\\.toml$/"
      ],
      "matchStrings": [
        "(\/\/|#)\\s*renovate:\\s+datasource=(?<datasource>\\S+?)\\s+packageName=(?<packageName>\\S+)(?:\\s+depName=(?<depName>\\S+?))?(?:\\s+datasourceTemplate=(?<datasourceTemplate>\\S+?))?(?:\\s+versioning=(?<versioning>\\S+?))?(?:\\s+extractVersion=(?<extractVersion>\\S+?))?(?:\\s+depType=(?<depType>\\S+?))?(?:\\s+registryUrl=(?<registryUrl>\\S+?))?(?:\\s+currentDigest=(?<currentDigest>\\S+?))?\\s+[A-Za-z0-9_]*_?(version|VERSION|default)\\s*[:=]\\s*[\"']?(?<currentValue>.+?)[\"']?\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}"
    }
  ]
}
